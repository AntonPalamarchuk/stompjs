<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@stomp/stompjs documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/Vagrant.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">@stomp/stompjs documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>
            <nav>

    <ul class="list">

        <li class="title">
            <a href="index.html" data-type="index-link">@stomp/stompjs documentation</a>
        </li>

        <li class="divider"></li>


        <li class="chapter">
            <a data-type="chapter-link" href="index.html"><span class="fa fa-home"></span>Getting started</a>
            <ul class="links">
                    <li class="link">
                        <a 
                            
                             href="overview.html" 
                             href="overview.html" 
                            data-type="chapter-link">
                            <span class="fa fa-fw fa-th"></span>Overview
                        </a>
                    </li>
                    <li class="link">
                      <a href="index.html" data-type="chapter-link"><span class="fa fa-file-text-o"></span>README</a>
                    </li>
                    <li class="link">
                            <a href="license.html"
                        data-type="chapter-link">
                            <span class="fa fa-fw fa-file-text-o"></span>LICENSE
                        </a>
                    </li>
            </ul>
        </li>

        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-additional-pages"
                >
                <span class="fa fa-fw fa-book"></span>
                <span>Guides</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-additional-pages"
                >
                    <li class="link ">
                        <a href="additional-documentation/usage.html" data-type="entity-link" data-context-id="additional">Usage</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/upgrading.html" data-type="entity-link" data-context-id="additional">Upgrading</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/sockjs-support.html" data-type="entity-link" data-context-id="additional">SockJS Support</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/change-log.html" data-type="entity-link" data-context-id="additional">Change Log</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/how-to-contribute.html" data-type="entity-link" data-context-id="additional">How to Contribute</a>
                    </li>
            </ul>
        </li>




        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-classes-links"
                >
                <span class="fa fa-fw fa-file-code-o"></span>
                <span>Classes</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-classes-links"
                >
                    <li class="link">
                        <a href="classes/Client.html" data-type="entity-link">Client</a>
                    </li>
                    <li class="link">
                        <a href="classes/CompatClient.html" data-type="entity-link">CompatClient</a>
                    </li>
                    <li class="link">
                        <a href="classes/Frame.html" data-type="entity-link">Frame</a>
                    </li>
                    <li class="link">
                        <a href="classes/Stomp.html" data-type="entity-link">Stomp</a>
                    </li>
                    <li class="link">
                        <a href="classes/Versions.html" data-type="entity-link">Versions</a>
                    </li>
            </ul>
        </li>



        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-interfaces-links"
                >
                <span class="fa fa-fw fa-info"></span>
                <span>Interfaces</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-interfaces-links"
                >
                    <li class="link">
                        <a href="interfaces/Message.html" data-type="entity-link">Message</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompConfig.html" data-type="entity-link">StompConfig</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompHeaders.html" data-type="entity-link">StompHeaders</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompSubscription.html" data-type="entity-link">StompSubscription</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/Transaction.html" data-type="entity-link">Transaction</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/publishParams.html" data-type="entity-link">publishParams</a>
                    </li>
            </ul>
        </li>


        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-miscellaneous-links"
                >
                <span class="fa fa-fw fa-cubes"></span>
                <span>Miscellaneous</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-miscellaneous-links"
                >
                    <li class="link">
                      <a href="miscellaneous/typealiases.html" data-type="entity-link">Type aliases</a>
                    </li>
            </ul>
        </li>


        <li class="chapter">
            <a data-type="chapter-link" href="coverage.html"><span class="fa fa-fw fa-tasks"></span>Documentation coverage</a>
        </li>


    </ul>

</nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>

    <ul class="list">

        <li class="title">
            <a href="index.html" data-type="index-link">@stomp/stompjs documentation</a>
        </li>

        <li class="divider"></li>

            <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>

        <li class="chapter">
            <a data-type="chapter-link" href="index.html"><span class="fa fa-home"></span>Getting started</a>
            <ul class="links">
                    <li class="link">
                        <a 
                            
                             href="overview.html" 
                             href="overview.html" 
                            data-type="chapter-link">
                            <span class="fa fa-fw fa-th"></span>Overview
                        </a>
                    </li>
                    <li class="link">
                      <a href="index.html" data-type="chapter-link"><span class="fa fa-file-text-o"></span>README</a>
                    </li>
                    <li class="link">
                            <a href="license.html"
                        data-type="chapter-link">
                            <span class="fa fa-fw fa-file-text-o"></span>LICENSE
                        </a>
                    </li>
            </ul>
        </li>

        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#additional-pages"
>
                <span class="fa fa-fw fa-book"></span>
                <span>Guides</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="additional-pages"
>
                    <li class="link ">
                        <a href="additional-documentation/usage.html" data-type="entity-link" data-context-id="additional">Usage</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/upgrading.html" data-type="entity-link" data-context-id="additional">Upgrading</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/sockjs-support.html" data-type="entity-link" data-context-id="additional">SockJS Support</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/change-log.html" data-type="entity-link" data-context-id="additional">Change Log</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/how-to-contribute.html" data-type="entity-link" data-context-id="additional">How to Contribute</a>
                    </li>
            </ul>
        </li>




        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#classes-links"
>
                <span class="fa fa-fw fa-file-code-o"></span>
                <span>Classes</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="classes-links"
>
                    <li class="link">
                        <a href="classes/Client.html" data-type="entity-link">Client</a>
                    </li>
                    <li class="link">
                        <a href="classes/CompatClient.html" data-type="entity-link">CompatClient</a>
                    </li>
                    <li class="link">
                        <a href="classes/Frame.html" data-type="entity-link">Frame</a>
                    </li>
                    <li class="link">
                        <a href="classes/Stomp.html" data-type="entity-link">Stomp</a>
                    </li>
                    <li class="link">
                        <a href="classes/Versions.html" data-type="entity-link">Versions</a>
                    </li>
            </ul>
        </li>



        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#interfaces-links"
>
                <span class="fa fa-fw fa-info"></span>
                <span>Interfaces</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="interfaces-links"
>
                    <li class="link">
                        <a href="interfaces/Message.html" data-type="entity-link">Message</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompConfig.html" data-type="entity-link">StompConfig</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompHeaders.html" data-type="entity-link">StompHeaders</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompSubscription.html" data-type="entity-link">StompSubscription</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/Transaction.html" data-type="entity-link">Transaction</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/publishParams.html" data-type="entity-link">publishParams</a>
                    </li>
            </ul>
        </li>


        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#miscellaneous-links"
>
                <span class="fa fa-fw fa-cubes"></span>
                <span>Miscellaneous</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="miscellaneous-links"
>
                    <li class="link">
                      <a href="miscellaneous/typealiases.html" data-type="entity-link">Type aliases</a>
                    </li>
            </ul>
        </li>


        <li class="chapter">
            <a data-type="chapter-link" href="coverage.html"><span class="fa fa-fw fa-tasks"></span>Documentation coverage</a>
        </li>


    </ul>

</nav>
               </div>
               <!-- START CONTENT -->
               <div class="content additional-page">
                   <div class="content-data">















<h1 id="upgrade-work-in-progress-">Upgrade (Work in Progress)</h1>
<h2 id="upgrading-from-version-3-4">Upgrading from version 3/4</h2>
<p>This version uses newer Javascript features. Few these can be pollyfilled in older
browsers.
However <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a>
is critically needed and not possible to be efficiently pollyfilled  (notably in IE9 or lower).
If you need to support any browser that does not have native support for Uint8Array
please continue using version 4 of this library.</p>
<h3 id="basic-changes">Basic changes</h3>
<p>Please follow section <a href="usage.html#include-stomp-js">Include STOMP.js</a> to add latest version
and to include necessary polyfills.</p>
<p>The following is for convenience - to keep the code change to the minimum.</p>
<div><pre class="line-numbers"><code class="language-javascript">    // Depending on your JS version you may have to use var instead of const 

    // To use compatibility mode
    const Stomp = StompJs.Stomp;</code></pre></div><h3 id="for-the-lazy-use-the-compatibility-mode">For the lazy: use the compatibility mode</h3>
<p>With the changes above, your code should now work. If you face issues please
raise an issue at <a href="https://github.com/stomp-js/stompjs/issues">https://github.com/stomp-js/stompjs/issues</a></p>
<p><em>Note: no new features will be added to the compatibility mode.
Attempt would be made so that code working in version 3/4 continue
to work. The compatibility mode will be maintained for a year.</em></p>
<h3 id="take-control-proper-upgrade">Take control: proper upgrade</h3>
<p>This section covers rationale of new features and 
changes needed to take full advantage.</p>
<h4 id="creating-a-client-and-connecting">Creating a client and connecting</h4>
<p>In version 3/4 typically a client instance is created and one of the
variants of connect is called.
Over the years connect has gotten many variants with different
combination of parameters.</p>
<p>The new version makes all options settable on client instance.
These options can be passed during creation of a client or while
calling <a href="https://stomp-js.github.io/stompjs/classes/Client.html#activate">client.activate</a>.</p>
<p><strong>Old</strong></p>
<div><pre class="line-numbers"><code class="language-javascript">    const client = Stomp.client(&quot;ws://localhost:15674/ws&quot;);

    client.debug =  function (str) {
      console.log(str);
    };

    client.heartbeat.incoming = 4000;
    client.heartbeat.outgoing = 4000;

    client.reconnect_delay = 5000;

    client.connect(&quot;user&quot;, &quot;password&quot;,
      function () {
        // Do something
      });</code></pre></div><p><strong>Updated</strong></p>
<div><pre class="line-numbers"><code class="language-javascript">    const client = new StompJs.Client({
      brokerURL: &quot;ws://localhost:15674/ws&quot;,
      connectHeaders: {
        login: &quot;user&quot;,
        passcode: &quot;password&quot;
      },
      debug: function (str) {
        console.log(str);
      },
      reconnectDelay: 5000,
      heartbeatIncoming: 4000,
      heartbeatOutgoing: 4000
    });

    client.onConnect = function(frame) {
    // Do something
    };

    client.activate();</code></pre></div><p>Please see <a href="../interfaces/StompConfig.html">StompConfig</a> for all possible options.
These options can be set onto <a href="../classes/Client.html">client</a>.
Alternatively these can be passed
as options to the <a href="../classes/Client.html#constructor">Client constructor</a> constructor,
the <a href="../classes/Client.html#activate">Client#activate</a>
or the <a href="../classes/Client.html#deactivate">Client#deactivate</a> calls.
If you want to set options in bulk you can use <a href="../classes/Client.html#configure">Client#configure</a>.</p>
<h4 id="publishing-messages">Publishing messages</h4>
<p><strong>Old</strong></p>
<div><pre class="line-numbers"><code class="language-javascript">    client.send(&#39;/topic/general&#39;, {}, &#39;Hello world&#39;);

    // Skip content length header
    client.send(&#39;/topic/general&#39;, {&#39;content-length&#39;: false}, &#39;Hello world&#39;);

    // Additional headers
    client.send(&#39;/topic/general&#39;, {&#39;priority&#39;: &#39;9&#39;}, &#39;Hello world&#39;);</code></pre></div><p><strong>Updated</strong></p>
<div><pre class="line-numbers"><code class="language-javascript">    client.publish({destination: &#39;/topic/general&#39;, body: &#39;Hello world&#39;});

    // There is an option to skip content length header
    client.publish({destination: &#39;/topic/general&#39;, body: &#39;Hello world&#39;, skipContentLengthHeader: true});

    // Additional headers
    client.publish({destination: &#39;/topic/general&#39;, body: &#39;Hello world&#39;, headers: {&#39;priority&#39;: &#39;9&#39;}});</code></pre></div><h4 id="semantic-changes">Semantic changes</h4>
<ul>
<li><a href="../classes/Stomp.html#client">Stomp.client</a> --&gt; <a href="../classes/Client.html#constructor">Client constructor</a>
and <a href="../classes/Client.html#brokerURL">Client#brokerURL</a></li>
<li><a href="../classes/Stomp.html#over">Stomp.over</a> --&gt; <a href="../classes/Client.html#constructor">Client constructor</a>
and <a href="../classes/Client.html#webSocketFactory">Client#webSocketFactory</a></li>
<li><a href="../classes/CompatClient.html#connect">connect</a> --&gt; <a href="../classes/Client.html#activate">Client#activate</a><ul>
<li>login, passcode, host --&gt; <a href="../classes/Client.html#connectHeaders">Client#connectHeaders</a></li>
<li>connectCallback --&gt; <a href="../classes/Client.html#onConnect">Client#onConnect</a> </li>
<li>errorCallback --&gt; <a href="../classes/Client.html#onStompError">Client#onStompError</a></li>
<li>closeEventCallback --&gt; <a href="../classes/Client.html#onWebSocketClose">Client#onWebSocketClose</a> </li>
</ul>
</li>
<li><a href="../classes/CompatClient.html#disconnect">disconnect</a> --&gt; <a href="../classes/Client.html#deactivate">Client#deactivate</a><ul>
<li>disconnectCallback --&gt; <a href="../classes/Client.html#onDisconnect">Client#onDisconnect</a></li>
</ul>
</li>
<li><a href="../classes/CompatClient.html#send">send</a> --&gt; <a href="../classes/Client.html#publish">Client#publish</a></li>
</ul>
<h4 id="name-changes">Name changes</h4>
<p>These changes have been carried out in order to make a consistent naming convention (lowerCamelCase)
and to make meaning of the option clearer.</p>
<ul>
<li><a href="../classes/CompatClient.html#reconnect_delay">reconnect_delay</a> --&gt; <a href="../classes/Client.html#reconnectDelay">Client#reconnectDelay</a></li>
<li><a href="../classes/CompatClient.html#ws">ws</a> --&gt; <a href="../classes/Client.html#webSocket">Client#webSocket</a></li>
<li><a href="../classes/CompatClient.html#onreceive">onreceive</a> --&gt; <a href="../classes/Client.html#onUnhandledMessage">Client#onUnhandledMessage</a></li>
<li><a href="../classes/CompatClient.html#onreceipt">onreceipt</a> --&gt; <a href="../classes/Client.html#onUnhandledReceipt">Client#onUnhandledReceipt</a></li>
<li><a href="../classes/CompatClient.html#heartbeat">heartbeat</a>.incoming --&gt; <a href="../classes/Client.html#heartbeatIncoming">Client#heartbeatIncoming</a></li>
<li><a href="../classes/CompatClient.html#heartbeat">heartbeat</a>.outgoing --&gt; <a href="../classes/Client.html#heartbeatOutgoing">Client#heartbeatOutgoing</a></li>
</ul>
<h4 id="dropped-apis">Dropped APIs</h4>
<ul>
<li>Client.html#maxWebSocketFrameSize [TODO]</li>
</ul>
<h2 id="migrating-from-version-2">Migrating from Version 2</h2>
<p>You will need to follow the instructions above with few additional considerations.</p>
<p>Please note:</p>
<ul>
<li>Auto reconnect is switched on by default.
Set <a href="../classes/Client.html#reconnectDelay">Client#reconnectDelay</a> to <code>0</code> to disable.</li>
<li>After each connect (i.e., initial connect as well each reconnection) the 
<a href="../classes/Client.html#onConnect">Client#onConnect</a> (connectCallback in earlier versions)
will be called.</li>
<li>After reconnecting, it will not automatically subscribe to queues that were subscribed.
So, if all subscriptions are part of the 
<a href="../classes/Client.html#onConnect">Client#onConnect</a> (which it would in most of the cases),
you will not need to do any additional handling.</li>
</ul>
<p>Additional notes:</p>
<ul>
<li><code>Stomp.overWS</code> is same as <code>Stomp.client</code>. Follow the instructions for <code>Stomp.client</code> above.</li>
<li><code>NodeJS</code> is supported at same level as browser. Test suits are executed for both NodJS and browser.
Follow the instructions as above.</li>
<li><code>Stomp.overTCP</code> is no longer supported. If your brokers supports WebStomp (STOMP over WebSocket),
you may switch to that.</li>
<li>If you are using <code>SockJS</code> please also see <a href="../sockjs.html">SockJS support</a></li>
</ul>

                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

        <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'additional-page';
            var COMPODOC_CURRENT_PAGE_URL = 'upgrading.html';
        </script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
       <script src="../js/search/search_index.js"></script>


    </body>
</html>
