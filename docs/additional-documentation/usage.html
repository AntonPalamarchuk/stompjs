<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@stomp/stompjs documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/Vagrant.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">@stomp/stompjs documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>
            <nav>

    <ul class="list">

        <li class="title">
            <a href="index.html" data-type="index-link">@stomp/stompjs documentation</a>
        </li>

        <li class="divider"></li>


        <li class="chapter">
            <a data-type="chapter-link" href="index.html"><span class="fa fa-home"></span>Getting started</a>
            <ul class="links">
                    <li class="link">
                        <a 
                            
                             href="overview.html" 
                             href="overview.html" 
                            data-type="chapter-link">
                            <span class="fa fa-fw fa-th"></span>Overview
                        </a>
                    </li>
                    <li class="link">
                      <a href="index.html" data-type="chapter-link"><span class="fa fa-file-text-o"></span>README</a>
                    </li>
                    <li class="link">
                            <a href="license.html"
                        data-type="chapter-link">
                            <span class="fa fa-fw fa-file-text-o"></span>LICENSE
                        </a>
                    </li>
            </ul>
        </li>

        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-additional-pages"
                >
                <span class="fa fa-fw fa-book"></span>
                <span>Guides</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-additional-pages"
                >
                    <li class="link ">
                        <a href="additional-documentation/usage.html" data-type="entity-link" data-context-id="additional">Usage</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/upgrading.html" data-type="entity-link" data-context-id="additional">Upgrading</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/sockjs-support.html" data-type="entity-link" data-context-id="additional">SockJS Support</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/change-log.html" data-type="entity-link" data-context-id="additional">Change Log</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/how-to-contribute.html" data-type="entity-link" data-context-id="additional">How to Contribute</a>
                    </li>
            </ul>
        </li>




        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-classes-links"
                >
                <span class="fa fa-fw fa-file-code-o"></span>
                <span>Classes</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-classes-links"
                >
                    <li class="link">
                        <a href="classes/Client.html" data-type="entity-link">Client</a>
                    </li>
                    <li class="link">
                        <a href="classes/CompatClient.html" data-type="entity-link">CompatClient</a>
                    </li>
                    <li class="link">
                        <a href="classes/Frame.html" data-type="entity-link">Frame</a>
                    </li>
                    <li class="link">
                        <a href="classes/Stomp.html" data-type="entity-link">Stomp</a>
                    </li>
                    <li class="link">
                        <a href="classes/Versions.html" data-type="entity-link">Versions</a>
                    </li>
            </ul>
        </li>



        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-interfaces-links"
                >
                <span class="fa fa-fw fa-info"></span>
                <span>Interfaces</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-interfaces-links"
                >
                    <li class="link">
                        <a href="interfaces/Message.html" data-type="entity-link">Message</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompConfig.html" data-type="entity-link">StompConfig</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompHeaders.html" data-type="entity-link">StompHeaders</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompSubscription.html" data-type="entity-link">StompSubscription</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/Transaction.html" data-type="entity-link">Transaction</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/publishParams.html" data-type="entity-link">publishParams</a>
                    </li>
            </ul>
        </li>


        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-miscellaneous-links"
                >
                <span class="fa fa-fw fa-cubes"></span>
                <span>Miscellaneous</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-miscellaneous-links"
                >
                    <li class="link">
                      <a href="miscellaneous/typealiases.html" data-type="entity-link">Type aliases</a>
                    </li>
            </ul>
        </li>


        <li class="chapter">
            <a data-type="chapter-link" href="coverage.html"><span class="fa fa-fw fa-tasks"></span>Documentation coverage</a>
        </li>


    </ul>

</nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>

    <ul class="list">

        <li class="title">
            <a href="index.html" data-type="index-link">@stomp/stompjs documentation</a>
        </li>

        <li class="divider"></li>

            <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>

        <li class="chapter">
            <a data-type="chapter-link" href="index.html"><span class="fa fa-home"></span>Getting started</a>
            <ul class="links">
                    <li class="link">
                        <a 
                            
                             href="overview.html" 
                             href="overview.html" 
                            data-type="chapter-link">
                            <span class="fa fa-fw fa-th"></span>Overview
                        </a>
                    </li>
                    <li class="link">
                      <a href="index.html" data-type="chapter-link"><span class="fa fa-file-text-o"></span>README</a>
                    </li>
                    <li class="link">
                            <a href="license.html"
                        data-type="chapter-link">
                            <span class="fa fa-fw fa-file-text-o"></span>LICENSE
                        </a>
                    </li>
            </ul>
        </li>

        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#additional-pages"
>
                <span class="fa fa-fw fa-book"></span>
                <span>Guides</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="additional-pages"
>
                    <li class="link ">
                        <a href="additional-documentation/usage.html" data-type="entity-link" data-context-id="additional">Usage</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/upgrading.html" data-type="entity-link" data-context-id="additional">Upgrading</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/sockjs-support.html" data-type="entity-link" data-context-id="additional">SockJS Support</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/change-log.html" data-type="entity-link" data-context-id="additional">Change Log</a>
                    </li>
                    <li class="link ">
                        <a href="additional-documentation/how-to-contribute.html" data-type="entity-link" data-context-id="additional">How to Contribute</a>
                    </li>
            </ul>
        </li>




        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#classes-links"
>
                <span class="fa fa-fw fa-file-code-o"></span>
                <span>Classes</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="classes-links"
>
                    <li class="link">
                        <a href="classes/Client.html" data-type="entity-link">Client</a>
                    </li>
                    <li class="link">
                        <a href="classes/CompatClient.html" data-type="entity-link">CompatClient</a>
                    </li>
                    <li class="link">
                        <a href="classes/Frame.html" data-type="entity-link">Frame</a>
                    </li>
                    <li class="link">
                        <a href="classes/Stomp.html" data-type="entity-link">Stomp</a>
                    </li>
                    <li class="link">
                        <a href="classes/Versions.html" data-type="entity-link">Versions</a>
                    </li>
            </ul>
        </li>



        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#interfaces-links"
>
                <span class="fa fa-fw fa-info"></span>
                <span>Interfaces</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="interfaces-links"
>
                    <li class="link">
                        <a href="interfaces/Message.html" data-type="entity-link">Message</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompConfig.html" data-type="entity-link">StompConfig</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompHeaders.html" data-type="entity-link">StompHeaders</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/StompSubscription.html" data-type="entity-link">StompSubscription</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/Transaction.html" data-type="entity-link">Transaction</a>
                    </li>
                    <li class="link">
                        <a href="interfaces/publishParams.html" data-type="entity-link">publishParams</a>
                    </li>
            </ul>
        </li>


        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#miscellaneous-links"
>
                <span class="fa fa-fw fa-cubes"></span>
                <span>Miscellaneous</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="miscellaneous-links"
>
                    <li class="link">
                      <a href="miscellaneous/typealiases.html" data-type="entity-link">Type aliases</a>
                    </li>
            </ul>
        </li>


        <li class="chapter">
            <a data-type="chapter-link" href="coverage.html"><span class="fa fa-fw fa-tasks"></span>Documentation coverage</a>
        </li>


    </ul>

</nav>
               </div>
               <!-- START CONTENT -->
               <div class="content additional-page">
                   <div class="content-data">















<h1 id="using-stomp-js">Using STOMP JS</h1>
<h2 id="the-stomp-broker">The STOMP Broker</h2>
<p>Ensure that your STOMP broker supports STOMP over WebSockets. Some messaging
brokers supports it out of the box while some may need special configuration 
or activating plugins.</p>
<h2 id="include-stomp-js">Include STOMP.js</h2>
<h3 id="in-web-browser">In Web Browser</h3>
<ul>
<li>Download or directly include one of [CDN links] or from <code>bundles/</code> folder.</li>
<li><code>StompJs</code> object will now be available. Read along to learn how to use it.</li>
</ul>
<h4 id="pollyfills">Pollyfills</h4>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign">Object.assign</a>.
It is not supported by IE (supported by Edge).
It will need to be polyfilled from <code>npm</code> package <code>es6-object-assign</code>. A simple approach:<div><pre class="line-numbers"><code class="language-html">  &lt;script src=&quot;https://cdn.jsdelivr.net/npm/es6-object-assign&#64;1.1.0/dist/object-assign-auto.min.js&quot;&gt;&lt;/script&gt;</code></pre></div></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder">TextEncoder</a>
and
<a href="https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder">TextDecoder</a>.
These are not supported by any of the MicroSoft browsers as of 2018.
These will need to be polyfilled from <code>npm</code> package <code>text-encoding</code>. A simple approach:<div><pre class="line-numbers"><code class="language-html">  &lt;script src=&quot;https://cdn.jsdelivr.net/npm/text-encoding&#64;0.6.4/lib/encoding.min.js&quot;&gt;&lt;/script&gt;</code></pre></div></li>
</ul>
<h3 id="in-nodejs">In NodeJS</h3>
<ul>
<li><p>Add npm modules <code>@stomp/stompjs</code>, <code>websocket</code> and <code>text-encoding</code> to your project.</p>
<div><pre class="line-numbers"><code class="language-bash">  $ npm install &#64;stomp/stompjs websocket text-encoding</code></pre></div></li>
<li><p>Require the module</p>
<div><pre class="line-numbers"><code class="language-javascript">      // This is simplest way to get going
      WebSocket = require(&#39;websocket&#39;).w3cwebsocket;

      // There is a proposal to add these by default in NodeJS, so good idea is to check first
      if (typeof TextEncoder !== &#39;function&#39;) {
        const TextEncodingPolyfill = require(&#39;text-encoding&#39;);
        TextEncoder = TextEncodingPolyfill.TextEncoder;
        TextDecoder = TextEncodingPolyfill.TextDecoder;
      }

      StompJs = require(&#39;&#64;stomp/stompjs/esm5/&#39;);  </code></pre></div></li>
<li>Read along to learn how to use the <code>StompJs</code> object.</li>
</ul>
<h2 id="setting-getting-options">Setting/getting options</h2>
<p>All options can be set/get by directly operating on the client instance:</p>
<div><pre class="line-numbers"><code class="language-javascript">    const client = new StompJs.Client();
    client.brokerURL = &quot;ws://localhost:15674/ws&quot;;

    console.log(client.brokerURL);</code></pre></div><p>These can also be set passing key/value pairs to <a href="../classes/Client.html#constructor">Client constructor</a>
or to <a href="../classes/Client.html#configure">Client#configure</a>.</p>
<h2 id="create-a-stomp-client">Create a STOMP client</h2>
<p>STOMP JavaScript clients will communicate to a STOMP server using a <code>ws://</code> or <code>wss://</code> URL.</p>
<div><pre class="line-numbers"><code class="language-javascript">    const client = new StompJs.Client({
      brokerURL: &quot;ws://localhost:15674/ws&quot;,
      connectHeaders: {
        login: &quot;user&quot;,
        passcode: &quot;password&quot;
      },
      debug: function (str) {
        console.log(str);
      },
      reconnectDelay: 5000,
      heartbeatIncoming: 4000,
      heartbeatOutgoing: 4000
    });

    client.onConnect = function(frame) {
      // Do something, all subscribes must be done is this callback
      // This is needed because this will be executed after a (re)connect
    };

    client.onStompError = function (frame) {
      // Will be invoked in case of error encountered at Broker
      // Bad login/passcode typically will cause an error
      // Complaint brokers will set `message` header with a brief message. Body may contain details.
      // Compliant brokers will terminate the connection after any error
      console.log(&#39;Broker reported error: &#39; + frame.headers[&#39;message&#39;]);
      console.log(&#39;Additional details: &#39; + frame.body);
    };

    client.activate();</code></pre></div><p>To deactivate a client call <a href="../classes/Client.html#deactivate">Client#deactivate</a>.
It will stop sttempting to reconnect and disconnect if there is an active connection.</p>
<div><pre class="line-numbers"><code class="language-javascript">    client.deactivate();</code></pre></div><h2 id="send-messages">Send messages</h2>
<p>When the client is connected to the server, it can send STOMP messages using
the <a href="../classes/Client.html#publish">Client#publish</a> method.</p>
<div><pre class="line-numbers"><code class="language-javascript">    client.publish({destination: &#39;/topic/general&#39;, body: &#39;Hello world&#39;});

    // There is an option to skip content length header
    client.publish({destination: &#39;/topic/general&#39;, body: &#39;Hello world&#39;, skipContentLengthHeader: true});

    // Additional headers
    client.publish({destination: &#39;/topic/general&#39;, body: &#39;Hello world&#39;, headers: {&#39;priority&#39;: &#39;9&#39;}});</code></pre></div><p>Starting version 5, sending binary messages is supported.
If the body is of type 
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a>,
the data will be treated as binary.</p>
<div><pre class="line-numbers"><code class="language-javascript">    var binaryData = generateBinaryData(); // This need to be of type Uint8Array
    client.publish({destination: &#39;/topic/special&#39;, body: binaryData});</code></pre></div><h2 id="subscribe-and-receive-messages">Subscribe and receive messages</h2>
<p>To receive messages in the browser, the STOMP client must first subscribe to 
a destination.</p>
<p>You can use the <a href="../classes/Client.html#subscribe">Client#subscribe</a> method to subscribe to a destination. The method
takes 2 mandatory arguments: <code>destination</code>, a String corresponding to the 
destination and <code>callback</code>, a function with one message argument and an optional
argument <code>headers</code>, a JavaScript object for additional headers.</p>
<div><pre class="line-numbers"><code class="language-javascript">  var subscription = client.subscribe(&quot;/queue/test&quot;, callback);</code></pre></div><p>The subscribe() methods returns a JavaScript object with one attribute, <code>id</code>, 
that correspond to the client subscription ID and one method <code>unsubscribe()</code> 
that can be used later on to unsubscribe the client from this destination.</p>
<p>Every time the server sends 
a message to the client, the client will in turn invoke the callback with a 
<a href="../classes/Message.html">Message</a> object.</p>
<div><pre class="line-numbers"><code class="language-javascript">  callback = function(message) {
    // called when the client receives a STOMP message from the server
    if (message.body) {
      alert(&quot;got message with body &quot; + message.body)
    } else {
      alert(&quot;got empty message&quot;);
    }
  };</code></pre></div><p>The <code>subscribe()</code> method takes an optional headers argument to specify 
additional <code>headers</code> when subscribing to a destination:</p>
<div><pre class="line-numbers"><code class="language-javascript">  var headers = {ack: &#39;client&#39;};
  client.subscribe(&quot;/queue/test&quot;, message_callback, headers);</code></pre></div><p>The client specifies that it will handle the message acknowledgement.</p>
<p>To stop receiving messages, the client can use the 
<a href="../interfaces/StompSubscription.html#unsubscribe">unsubscribe</a> method on 
the object returned by the <a href="../classes/Client.html#subscribe">Client#subscribe</a> method.</p>
<div><pre class="line-numbers"><code class="language-javascript">  var subscription = client.subscribe(&quot;queue/test&quot;, onmessage);

  // ... use the subscription ...

  subscription.unsubscribe();</code></pre></div><h2 id="binary-messages">Binary messages</h2>
<h3 id="prep-your-broker">Prep your broker</h3>
<p>Not every broker will support binary messages out of the box.
For example RabbitMQ (see: <a href="https://www.rabbitmq.com/web-stomp.html">https://www.rabbitmq.com/web-stomp.html</a>)
will need following to be added to the server configuration:</p>
<div><pre class="line-numbers"><code class="language-none">web_stomp.ws_frame = binary</code></pre></div><h3 id="publishing-binary-messages">Publishing binary messages</h3>
<p><a href="../classes/Client.html#publish">Client#publish</a> will treat a message as binary if <code>body</code> is
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a>.</p>
<h3 id="receiving-binary-messages">Receiving binary messages</h3>
<p>There is a callback <a href="../classes/Client.html#treatMessageAsBinary">Client#treatMessageAsBinary</a>
which by default returns <code>false</code> indicating all incoming messages are considered to be text and decoded as UTF8.
If you are receiving binary messages you will need to provide an implementation of this callback.
When this callback returns <code>true</code> the body will be returned as a
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a>.</p>
<div><pre class="line-numbers"><code class="language-javascript">    // When `true` octet data from teh body is returned as is.
    // When `false` body of incoming message is converted to `string` assuming to be UTF8.

    // Treat all messages a binary
    client.treatMessageAsBinary = function(message) {
      return true;
    };

    // Treat a message as binary based on content-type
    // This header is not a standard header, while publishing messages it needs to be explicitly set.
    client.treatMessageAsBinary = function(message) {
      return message.headers[&#39;content-type&#39;] === &#39;application/octet-stream&#39;;
    };</code></pre></div><h2 id="json-support">JSON support</h2>
<p>The body of a STOMP message must be a String. If you want to send and receive
<a href="http://json.org/">JSON</a> objects, you can use <code>JSON.stringify()</code> and 
<code>JSON.parse()</code> to transform the JSON object to a String and vice versa.</p>
<div><pre class="line-numbers"><code class="language-javascript">  var quote = {symbol: &#39;APPL&#39;, value: 195.46};
  client.send(&quot;/topic/stocks&quot;, {}, JSON.stringify(quote));

  client.subcribe(&quot;/topic/stocks&quot;, function(message) {
    var quote = JSON.parse(message.body);
    alert(quote.symbol + &quot; is at &quot; + quote.value);
  });</code></pre></div><h2 id="acknowledgment">Acknowledgment</h2>
<p>By default, STOMP messages will be automatically acknowledged by the server
before the message is delivered to the client.</p>
<p>The client can choose instead to handle message 
acknowledgement by subscribing 
to a destination and specify a <code>ack</code> header set to <code>client</code> or 
<code>client-individual</code>.</p>
<p>In that case, the client must use the <a href="../classes/Message.html#ack">Message#ack</a> method to inform the 
server that it has processed the message.</p>
<div><pre class="line-numbers"><code class="language-javascript">  var subscription = client.subscribe(&quot;/queue/test&quot;,
    function(message) {
      // do something with the message
      // ...
      // and acknowledge it
      message.ack();
    },
    {ack: &#39;client&#39;}
  );</code></pre></div><p>The <a href="../classes/Message.html#ack">Message#ack</a> method accepts <code>headers</code> argument for additional headers.
For example, it is possible to acknowledge a 
message as part of a transaction and ask for a receipt when the <code>ACK</code> has effectively been processed by the broker:</p>
<div><pre class="line-numbers"><code class="language-javascript">  var tx = client.begin();
  message.ack({ transaction: tx.id, receipt: &#39;my-receipt&#39; });
  tx.commit();</code></pre></div><p>The <a href="../classes/Message.html#nack">Message#nack</a> method can also be used to inform STOMP 1.1 or higher
brokers that the client did not consume the message. It 
takes the same arguments than the <a href="../classes/Message.html#ack">Message#ack</a> method.</p>
<h2 id="transactions">Transactions</h2>
<p>Messages can be sent and acknowledged <em>in a transaction</em>.</p>
<p>A transaction is started by the client using its <a href="../classes/Client.html#begin">Client#begin</a> method which 
takes an optional <code>transaction_id</code>.</p>
<p>This methods returns a JavaScript object with an <code>id</code> attribute corresponding
to the transaction ID and two methods:</p>
<ul>
<li><a href="../classes/Client.html#commit">Client#commit</a> to commit the transaction</li>
<li><a href="../classes/Client.html#abort">Client#abort</a> to abort the transaction</li>
</ul>
<p>The client can then send and/or acknowledge messages in the transaction
by specifying a <code>transaction</code> set with the transaction <code>id</code>.</p>
<div><pre class="line-numbers"><code class="language-javascript">  // start the transaction
  var tx = client.begin();
  // send the message in a transaction
  client.publish({destination: &quot;/queue/test&quot;, headers: {transaction: tx.id}, body: &quot;message in a transaction&quot;});
  // commit the transaction to effectively send the message
  tx.commit();</code></pre></div><p><em>If you forget to add the <code>transaction</code> header when calling <a href="../classes/Client.html#publish">Client#publish</a> the message
will not be part of the transaction and will be sent directly without waiting
for the completion of the transaction.</em></p>
<div><pre class="line-numbers"><code class="language-javascript">  // start the transaction
  var tx = client.begin();
  // oops! send the message outside the transaction
  client.publish({destination: &quot;/queue/test&quot;, body: &quot;message in a transaction&quot;});
  tx.abort(); // Too late! the message has been sent</code></pre></div><h2 id="heart-beating">Heart-beating</h2>
<p>If the STOMP broker accepts STOMP 1.1 or higher frames, 
heart-beating is enabled by default.
Options <a href="../classes/Client.html#heartbeatIncoming">Client#heartbeatIncoming</a>
and <a href="../classes/Client.html#heartbeatOutgoing">Client#heartbeatOutgoing</a>
can be used to control heart-beating
(default value for both is 10,000ms). These can be disabled by setting to 0.</p>
<div><pre class="line-numbers"><code class="language-javascript">    client.heartbeatOutgoing = 20000; // client will send heartbeats every 20000ms
    client.heartbeatIncoming = 0;     // client does not want to receive heartbeats
                                       // from the server</code></pre></div><h2 id="auto-reconnect">Auto Reconnect</h2>
<p>The <code>client</code> supports automatic reconnecting in case of a connection failure. It is
controlled by a option <a href="../classes/Client.html#reconnectDelay">Client#reconnectDelay</a>.
Default value is 5000ms, which indicates that
a attempt to connect will be made after 5000ms of a connection drop.</p>
<div><pre class="line-numbers"><code class="language-javascript">  // Add the following if you need automatic reconnect (delay is in milli seconds)
  client.reconnectDelay = 300;</code></pre></div><p>This can be set quite small.</p>
<h2 id="debug">Debug</h2>
<p>The client can set its <a href="../classes/Client.html#debug">Client#debug</a> property to a function with takes a <code>String</code> 
argument to see all the debug statements of the library:</p>
<div><pre class="line-numbers"><code class="language-javascript">  client.debug = function(str) {
    console.log(str);
  };</code></pre></div><p>By default, the debug messages are ignored.
On a busy system the logs can be overwhelming.</p>
<h2 id="callbacks">Callbacks</h2>
<h3 id="lifecycle-callbacks">Lifecycle callbacks</h3>
<ul>
<li><a href="../classes/Client.html#onConnect">Client#onConnect</a> - invoked for each time STOMP broker connects and
STOMP handshake is complete</li>
<li><a href="../classes/Client.html#onDisconnect">Client#onDisconnect</a> - invoked after each graceful disconnection.
If the connection breaks because of an error or network failure, it will no tbe called.</li>
<li><a href="../classes/Client.html#onStompError">Client#onStompError</a> - invoked when the broker reports an Error</li>
<li><a href="../classes/Client.html#onWebSocketClose">Client#onWebSocketClose</a>  - when the WebSocket closes.
It is most reliable way of knowing that the connection has terminated.</li>
</ul>
<h3 id="frame-callbacks">Frame callbacks</h3>
<ul>
<li><a href="../classes/Client.html#onUnhandledMessage">Client#onUnhandledMessage</a> - typically brokers will send messages
corresponding to subscriptions. 
However, brokers may support concepts that are beyond standard definition of STOMP -
for example RabbitMQ support concepts of temporary queues.
If any message is received that is not linked to a subscription, this callback will be invoked.</li>
<li><a href="../classes/Client.html#onUnhandledReceipt">Client#onUnhandledReceipt</a> - you should prefer
<a href="../classes/Client.html#watchForReceipt">Client#watchForReceipt</a>. If there is any incoming receipt for
which there is no active watcher, this callback will be invoked.</li>
<li><a href="../classes/Client.html#treatMessageAsBinary">Client#treatMessageAsBinary</a> - invoked for each incoming
message, depending on the outcome, the body is returned as string or Uint8Array. The default implementation
always returns <code>false</code>.</li>
<li><a href="../classes/Client.html#onUnhandledFrame">Client#onUnhandledFrame</a> - it will be invoked if broker sends a
non standard STOMP command.</li>
</ul>
<h2 id="advanced-notes">Advanced notes</h2>
<p>The version 5 of this library has taken significant variation from previous syntax. This version allows
all of the options and callbacks to be altered.
New values will take effect as soon as possible. For example:</p>
<ul>
<li>Altered values of <a href="../classes/Client.html#onUnhandledMessage">Client#onUnhandledMessage</a> 
or <a href="../classes/Client.html#onDisconnect">Client#onDisconnect</a> will be effective immediately.</li>
<li>New values of <a href="../classes/Client.html#heartbeatIncoming">Client#heartbeatIncoming</a>
and <a href="../classes/Client.html#heartbeatOutgoing">Client#heartbeatOutgoing</a> will be used next time STOMP connects.</li>
</ul>
<p>The callback sequences are arranged in a way that most expected operations should work.
For example it is possible to call <a href="../classes/Client.html#deactivate">Client#deactivate</a>
within <a href="../classes/Client.html#onStompError">Client#onStompError</a>
or <a href="../classes/Client.html#onWebSocketClose">Client#onWebSocketClose</a>.
This is useful if we determine that we have incorrect credentials and no point keep on trying to connect.</p>
<p>The above also allows readjusting <a href="../classes/Client.html#reconnectDelay">Client#reconnectDelay</a>
in <a href="../classes/Client.html#onWebSocketClose">Client#onWebSocketClose</a>.
This can be used to implement exponential back-off before each successive reconnect attempt.</p>
<p>Even <a href="../classes/Client.html#brokerURL">Client#brokerURL</a>
or <a href="../classes/Client.html#connectHeaders">Client#connectHeaders</a>
can be altered which would get used in a subsequent reconnect.
However, I will suggest creating a new instance of the STOMP client in this scenario.</p>

                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

        <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'additional-page';
            var COMPODOC_CURRENT_PAGE_URL = 'usage.html';
        </script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
       <script src="../js/search/search_index.js"></script>


    </body>
</html>
